<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Select Voice for TTS Example</title>
</head>

<body>
    <textarea id="textArea" rows="4" cols="50" placeholder="Type something..."></textarea>

    <select id="voiceSelect"></select>
    <button onclick="speakText()">Speak</button>

    <script>
        let voices = [];
        const voiceSelect = document.getElementById('voiceSelect');

        // This function populates the voice selection dropdown
        function populateVoiceList() {
            voices = speechSynthesis.getVoices();
            voiceSelect.innerHTML = ''; // Clear current options

            voices.forEach((voice, i) => {
                const option = document.createElement('option');
                option.value = i;
                option.innerHTML = `${voice.name} (${voice.lang})`;
                voiceSelect.appendChild(option);
            });
        }

        // For some browsers, the list of voices is loaded asynchronously after page load
        speechSynthesis.onvoiceschanged = populateVoiceList;
        populateVoiceList();

        function speakText() {
            const text = document.getElementById('textArea').value;

            const utterance = new SpeechSynthesisUtterance(text);
            
            const selectedVoiceIndex = voiceSelect.value;
            if (selectedVoiceIndex in voices) {
                utterance.voice = voices[selectedVoiceIndex];
            }

            speechSynthesis.speak(utterance);
        }
    </script>
</body>

</html>
